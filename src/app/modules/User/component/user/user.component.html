<div class="container">
    <div nz-row style="display: flex;justify-content: space-evenly;">
        <div nz-card-grid class="bg-primary"  nzSpan="7" nz-col [ngStyle]="gridStyle">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="me-2">
                    <h4 class="display-5 text-white">${{stats?.balance}}</h4>
                    <p class="card-text"><strong>Account Balance</strong></p>
                </div>
                <h1><span class="material-symbols-outlined">
                    account_balance
                    </span></h1>
            </div>
            <div class="card-text">
                    <nz-statistic
                    [nzValue]="balancePercentage"
                    [nzPrefix]="prefixTplThree"
                    [nzSuffix]="'%'"
                    [nzValueStyle]="{ color: balancePercentage > 0 ? '#3F8600' : '#CF1322' }"
                ></nz-statistic>
                <ng-template #prefixTplThree>
                    <span nz-icon [nzType]="balancePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
                </ng-template>
                    <div class="caption">from last month</div>
            </div>
            </div>

        <div nz-card-grid class="bg-white" nzSpan="7" nz-col [ngStyle]="gridStyle">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="me-2">
                    <!-- <h4 class="display-5 text-success">${{stats?.income}}</h4> -->
                    <h4 class="display-5 text-success">${{currentMonthIncome}}</h4>
                    <p class="card-text"><strong>Current Month Income </strong></p>
                </div>
                <span class="material-symbols-outlined">
                    payments
                    </span>
            </div>
            <div class="card-text">
                    <nz-statistic
                    [nzValue]="incomePercentage"
                    [nzPrefix]="prefixTplOne"
                    [nzSuffix]="'%'"
                    [nzValueStyle]="{ color: incomePercentage > 0 ? '#3F8600' : '#CF1322' }"
                  ></nz-statistic>
                  <ng-template #prefixTplOne>
                    <span nz-icon [nzType]="incomePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
                  </ng-template>
                <div class="caption">from last month</div>
                </div>
            </div>
        
        <div nz-card-grid class="bg-info " nzSpan="7" nz-col [ngStyle]="gridStyle">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="me-2">
                    <!-- <h4 class="display-5 text-success">${{stats?.expense}}</h4> -->
                    <h4 class="display-5 text-danger">${{currentMonthExpense}}</h4>
                    <p class="card-text"><strong>Current Month Expense </strong></p>
                </div>
                <span class="material-symbols-outlined">
                    payments
                    </span>
            </div>
            <div class="card-text">                
                    <nz-statistic
                    [nzValue]="expensePercentage"
                    [nzPrefix]="prefixTplTwo"
                    [nzSuffix]="'%'"
                    [nzValueStyle]="{ color: expensePercentage > 0 ? '#CF1322' : '#3F8600' }"
                  ></nz-statistic>
                  <ng-template #prefixTplTwo>
                    <span nz-icon [nzType]="expensePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
                  </ng-template>
                <div class="caption">from last month</div>
                </div>
            </div>        
        </div>
</div>
    <div nz-row style="margin-top: 20px;">
        <div nz-col nzFlex="1 1 200px">
            <nz-card nzType="inner" nzTitle="Income Charts">
               <canvas *ngIf="isBrowser" #incomeLineChartRef></canvas>
            </nz-card>
        </div>
        <div nz-col nzFlex="0 1 300px" style="margin-left:15px">
            <nz-card nzType="inner" nzTitle="Recent History">
                <div nz-card-grid style="width:100%;">
                    <span style="color: green;">+{{stats?.latestIncome?.amount}} {{stats?.latestIncome?.description}}</span>
                </div>
                <div nz-card-grid style="width:100%;">
                    <span style="color: red;">+{{stats?.latestExpense?.amount}} {{stats?.latestExpense?.description}}</span>
                </div>
            </nz-card>
            <nz-card nzType="inner" nzTitle="Income">
                <div nz-row>
                    <div nz-col nzXs="2" nzSm="4" nzMd="6" nzLg="8" nzXl="10">Minimum: {{stats?.minIncome}}</div>
                    <div nz-col nzXs="20" nzSm="16" nzMd="12" nzLg="8" nzXl="4"></div>
                    <div nz-col nzXs="2" nzSm="4" nzMd="6" nzLg="8" nzXl="10">Maximum: {{stats?.maxIncome}}</div>
                </div>
            </nz-card>
            <nz-card nzType="inner" nzTitle="Expense">
                <div nz-row>
                    <div nz-col nzXs="2" nzSm="4" nzMd="6" nzLg="8" nzXl="10">Minimum: {{stats?.minExpense}}</div>
                    <div nz-col nzXs="20" nzSm="16" nzMd="12" nzLg="8" nzXl="4"></div>
                    <div nz-col nzXs="2" nzSm="4" nzMd="6" nzLg="8" nzXl="10">Maximum: {{stats?.maxExpense}}</div>
                </div>
            </nz-card>
        </div>
    </div>
    <div nz-row style="margin-top: 20px;">
        <div nz-col nzFlex="1 1 200px">
            <nz-card nzType="inner" nzTitle="Expense Chart">
                <canvas *ngIf="isBrowser" #expenseLineChartRef></canvas>    
            </nz-card>
        </div>
    </div>


<div style="width: 100%; height: 60vh; position: relative;">
    <h2>Transaction Details of Both Income And Expense Line Chart</h2>
    <canvas baseChart
            [datasets]="lineChartData"
            [labels]="lineChartLabels"
            [options]="lineChartOptions"
            [legend]="lineChartLegend"
            [type]="lineChartType">
    </canvas>
  </div>

  <!-- <div style="background: #ECECEC; padding: 30px;">
    <nz-row [nzGutter]="16">
      <nz-col [nzSpan]="12">
        <nz-card>
          <nz-statistic
            [nzValue]="incomePercentage"
            [nzTitle]="'Income Change'"
            [nzPrefix]="prefixTplOne"
            [nzSuffix]="'%'"
            [nzValueStyle]="{ color: incomePercentage > 0 ? '#3F8600' : '#CF1322' }"
          ></nz-statistic>
          <ng-template #prefixTplOne>
            <span nz-icon [nzType]="incomePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
          </ng-template>
        </nz-card>
      </nz-col>
      <nz-col [nzSpan]="12">
        <nz-card>
          <nz-statistic
            [nzValue]="expensePercentage"
            [nzTitle]="'Expense Change'"
            [nzPrefix]="prefixTplTwo"
            [nzSuffix]="'%'"
            [nzValueStyle]="{ color: expensePercentage > 0 ? '#CF1322' : '#3F8600' }"
          ></nz-statistic>
          <ng-template #prefixTplTwo>
            <span nz-icon [nzType]="expensePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
          </ng-template>
        </nz-card>
      </nz-col>
    </nz-row>
    <nz-row [nzGutter]="16" style="margin-top: 16px;">
      <nz-col [nzSpan]="24">
        <nz-card>
          <nz-statistic
            [nzValue]="balancePercentage"
            [nzTitle]="'Balance Change'"
            [nzPrefix]="prefixTplThree"
            [nzSuffix]="'%'"
            [nzValueStyle]="{ color: balancePercentage > 0 ? '#3F8600' : '#CF1322' }"
          ></nz-statistic>
          <ng-template #prefixTplThree>
            <span nz-icon [nzType]="balancePercentage > 0 ? 'arrow-up' : 'arrow-down'"></span>
          </ng-template>
        </nz-card>
      </nz-col>
    </nz-row>
  </div> -->
  